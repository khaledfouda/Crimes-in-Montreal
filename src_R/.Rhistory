source('D:/CODE/projects/mtl/Crimes-in-Montreal/src_R/Data_Cleaning.R')
data = read.csv('../data/output/ts_Fatal_Crime.csv')
# group by Year-Month
data %>%
mutate(YYM=paste0(year(DATE),'-',sprintf("%02d",month(DATE)))) %>%
arrange(year(DATE),month(DATE)) %>%
group_by(YYM) %>%
summarise(count = sum(count)) -> data
require(dplyr)
require(lubridate)
library(xts)
library(tidyr)
# group by Year-Month
data %>%
mutate(YYM=paste0(year(DATE),'-',sprintf("%02d",month(DATE)))) %>%
arrange(year(DATE),month(DATE)) %>%
group_by(YYM) %>%
summarise(count = sum(count)) -> data
# Define time series
dts = ts(data$count, start = c(2015,1), end=c(2021,5),frequency = 12)
monthplot(dts)
seasonplot(dts)
library(forecast)
seasonplot(dts)
#------------------------------
#Automated Forecasting:
## forecast automatically selects exponenttial and arima model.
#he ets() function supports both additive and multiplicative models.
#The auto.arima() function can handle both seasonal and nonseasonal ARIMA models.
#Models are chosen to maximize one of several fit criteria
#-------------------------
# Automated forecasting using an exponential model
fit <- ets(dts);fit
plot(fit)
# Automated forecasting using an ARIMA model
fit <- auto.arima(dts);fit
plot(forecast(fit,h=20))
resid(fit)
seasonplot(dts)
plot(fit)
fit = stl(dts, s.window = "period")
plot(fit)
fit = stl(dts, s.window = "period");fit
s
fit = stl(dts, s.window = "period");fit$weights
data = read.csv('../data/output/ts_Armed_Robbery.csv')
# group by Year-Month
data %>%
mutate(YYM=paste0(year(DATE),'-',sprintf("%02d",month(DATE)))) %>%
arrange(year(DATE),month(DATE)) %>%
group_by(YYM) %>%
summarise(count = sum(count)) -> data
# Define time series
dts = ts(data$count, start = c(2015,1), end=c(2021,5),frequency = 12)
fit = stl(dts, s.window = "period");fit$weights
plot(fit)
monthplot(dts)
seasonplot(dts)
fit <- auto.arima(dts);fit
plot(forecast(fit,h=20))
View(data)
data1 = read.csv('../data/output/Police_Interventions_cleaned.csv')
View(data1)
data = read.csv('../data/output/ts_Fatal_Crime.csv')
table(data$count)
View(data)
# group by Year-Month
data %>%
mutate(YYM=paste0(year(DATE),'-',sprintf("%02d",month(DATE)))) %>%
arrange(year(DATE),month(DATE)) %>%
group_by(YYM) %>%
summarise(count = sum(count)) -> data
table(data$count)
table(data$count) %>% sum()
View(data)
source('D:/CODE/projects/mtl/Crimes-in-Montreal/src_R/Data_Cleaning.R')
View(data)
source('D:/CODE/projects/mtl/Crimes-in-Montreal/src_R/Data_Cleaning.R')
source('D:/CODE/projects/mtl/Crimes-in-Montreal/src_R/Data_Cleaning.R')
